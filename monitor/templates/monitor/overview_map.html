{% extends 'base.html' %}

{% block content %}

  <table class='table table-bordered table-condensed table-striped'>
    <tr><th colspan='3'>Overview Map</th></tr>
    <tr><td id='overview_map' colspan='3'></td></tr>
    <tr>
      <td class='UP'>{{ up }}</td>
      <td class='WARNING'><a href='{% url 'monitor:warning_list' %}'>{{ warning }}</a></td>
      <td class='UNREACHABLE'><a href='{% url 'monitor:unreachable_list' %}'>{{ unreachable }}</a></td>
    </tr>
  </table>

  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script>
    var map = L.map('overview_map').setView([42.292529, -82.914347], 11);
    {% include 'mapicons.html' %}

    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {}).addTo(map)

    {% for host in hosts %}
      L.marker([{{ host.latitude_y }}, {{ host.longitude_x }}], {icon: {{ host.status }}ICON })
       .addTo(map)
       .bindPopup('<a href="{% url 'monitor:detail' host.id %}">{{ host.name }}</a>');

    {% endfor %}

  </script>
{% endblock %}
